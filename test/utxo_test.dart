import 'dart:convert';

import 'package:test/test.dart';
import 'package:redbellywallet/rbbclib/utxo.dart';

String getTableAccount = '{"id":"0","result":"W3siSGFzaCI6IjJhMDEwNmJmYjliYTA5NjAzZjljMzZkYTFjY2M2YzUxZDdiY2E0ODM1NjhkODg5M2QxYmQ3MmNmMTA3MzZiOTYiLCJJbmRleCI6MCwiVmFsdWUiOjEwfSx7Ikhhc2giOiIwODNkYWM1MTE2ZjNjNDRjMTY4ZTQ4Zjc3ZTE4ODcxMDgyMGI3MDExNGZhZjYzMzhiZGJkMjcyMGZjOTczNDBkIiwiSW5kZXgiOjAsIlZhbHVlIjoxMH0seyJIYXNoIjoiOTZmNjEyNDE4YzYwMzM1OGM0MTA3MzEzMjIwMWRhOTBiZjZiMzA2YjgwMjRkMTM4MmY1YmU4MzdmMWMwZjM1NCIsIkluZGV4IjowLCJWYWx1ZSI6MTB9LHsiSGFzaCI6IjViMjQ1MTQ0NjE5MmRiZjFjMTViZTZlZDk5OTYwYzYyNmZlYTY4OGVjNTdkZWRhZDlkY2QxYTg5NWI2YmFiMTAiLCJJbmRleCI6MCwiVmFsdWUiOjEwfSx7Ikhhc2giOiIzMTdkNWIxMjNkNjkyODIzM2Y4N2FmNmUyNDEzN2ZkMDU0ODE4YWE4OGY2ODJhYzVlODQ0M2VlMGE2NzExMmExIiwiSW5kZXgiOjAsIlZhbHVlIjoxMH0seyJIYXNoIjoiMzEwNWNlOWZiMzQxNWE4YjI1Y2RlMGY2OTg4M2QwNWZmZWMyZDRhM2ViNjU0MDk5MmM4NzVhODQ0OWYyYzc0MSIsIkluZGV4IjowLCJWYWx1ZSI6MTB9LHsiSGFzaCI6ImM1YTAxMzQ3MTA5MDFmMzAyMGQwMzQ1Yzk3Y2U1OWE1N2VmOGY4Y2FmMjM4NDQ1MmU3NTMzZDZiMGE3NDNhZWYiLCJJbmRleCI6MCwiVmFsdWUiOjEwfSx7Ikhhc2giOiJmNzZjYmIxMDdjM2Q5OTg0MGUxOGQxN2E4ZWY1MjUzMmViYmE0NTRjMjhmNjBkNWY1NTY3ZmFiMDgwYzFmN2JhIiwiSW5kZXgiOjEsIlZhbHVlIjo1fSx7Ikhhc2giOiJjYzY0NmY5ZTYwMGFmZGYzMGRlMjNhZGE4ODQ0OGViNmQ1M2E3M2NmOTkwNjk4OWQwZTViMTcxZWNjOTBiZjA5IiwiSW5kZXgiOjAsIlZhbHVlIjoxMH0seyJIYXNoIjoiM2FjMGNmYzc3MzU3ZWFhMGM3YmQ2MzA3NjBmZjM0YjliN2M2NmViYjdkNzI4OWMxOGM2ZDllZTE0OTE2ZWMzZCIsIkluZGV4IjowLCJWYWx1ZSI6MTB9LHsiSGFzaCI6IjFlOTY4Njk2MzViZThlZTk0NjIkNzAyYmVlZThmNDNiZWE0NTliYTc0MWIwNTg2MTk0MzVhMDViNzk5NmQzOGIiLCJJbmRleCI6MCwiVmFsdWUiOjEwfSx7Ikhhc2giOiI5ZGNiOWFiYzFhMTJiNjEyNThjZDg2MWJjMWJjNDJkOTQzYTQ3OWUxZGRiZGQ1YmM5MzIwZjc4YWYzYmFiNzI2IiwiSW5kZXgiOjAsIlZhbHVlIjoxMH0seyJIYXNoIjoiMmEwMTA2YmZiOWJhMDk2MDNmOWMzNmRhMWNjYzZjNTFkN2JjYTQ4MzU2OGQ4ODkzZDFiZDcyY2YxMDczNmI5NiIsIkluZGV4IjowLCJWYWx1ZSI6MTB9LHsiSGFzaCI6IjA4M2RhYzUxMTZmM2M0NGMxNjhlNDhmNzdlMTg4NzEwODIwYjcwMTE0ZmFmNjMzOGJkYmQyNzIwZmM5NzM0MGQiLCJJbmRleCI6MCwiVmFsdWUiOjEwfV0=","error":null}';
String findForAccount = '{"id":"0","result":"W3siVmFsdWUiOjEwLCJTcGVudCI6ZmFsc2UsIlNjcmlwdCI6IkJBeXh3WDdZQU1HMm9DdGJ1SVlXVlpXbzNvQnRrMHhBTWRQclJHMzM0RmN1VGVkd1dPazZQdCtOWGdXTWtBTnNsNzB1K2h5SVQ5YXZyV09Nc01jb04xZz0iLCJBZGRyZXNzIjoiV0Q5R1MxQWd6SXVXZmszQythcHdibW5hbmd3PSJ9LHsiVmFsdWUiOjEwLCJTcGVudCI6ZmFsc2UsIlNjcmlwdCI6IkJFMTVvdDdaUDk4UWJyZjNKSHJxS2grMzVoVzBneG1vdlozQmdrbTdtSlJXbWs5MWVlWmI1S2k3NzdheFVzVlBidVZEVnJDSVRzOEVHTE43eXJickpuND0iLCJBZGRyZXNzIjoiV0Q5R1MxQWd6SXVXZmszQythcHdibW5hbmd3PSJ9LHsiVmFsdWUiOjEwLCJTcGVudCI6ZmFsc2UsIlNjcmlwdCI6IkJHc3MvNGtPSnlGbmlqU0ZGRzdEakpMMG9ZVkYyT1hic0x2UVMrdVl1VjJDaGNoVU9ZTlUxejdZNDhTZk8wT1BLQzVvbzltdGFETnhNTTM1WENOWE45ST0iLCJBZGRyZXNzIjoiV0Q5R1MxQWd6SXVXZmszQythcHdibW5hbmd3PSJ9LHsiVmFsdWUiOjEwLCJTcGVudCI6ZmFsc2UsIlNjcmlwdCI6IkJJaC9VN2RjK2JNcEdqOG5CelpXbmpYK1p3N2RDczl6N0pQSmdoNjhlaSthTGV4K1Y1MS9OOWVzVGZxdndhQXlqRnNrRHlHdU5Ia2R1ZUdiOW91dUVuTT0iLCJBZGRyZXNzIjoiV0Q5R1MxQWd6SXVXZmszQythcHdibW5hbmd3PSJ9LHsiVmFsdWUiOjUsIlNwZW50IjpmYWxzZSwiU2NyaXB0IjoiQk1OTkNlVFBUaEI3ZVYyRUU2eHRrYjNNQWsyVU0vSmZwVEtpSVVFdXhHaXNobUdBRnd6V3EzUUVwOUljWHpKWHBYQll4NWl5aGZSQ0tOMDZHaCt2Zk40PSIsIkFkZHJlc3MiOiJXRDlHUzFBZ3pJdVdmazNDK2Fwd2JtbmFuZ3c9In0seyJWYWx1ZSI6MTAsIlNwZW50IjpmYWxzZSwiU2NyaXB0IjoiQkNHMmcyeE5tU0F5S3VoMHIyT2tpS3Q1bDRnMmVUdGlQZjMzcEFLS3l0ZjlFYmY5M21ZU2hCc2ZFamRLRjE5N0JnZ0JTaFJpZ09YTGx2S1hyMTNibjlnPSIsIkFkZHJlc3MiOiJXRDlHUzFBZ3pJdVdmazNDK2Fwd2JtbmFuZ3c9In0seyJWYWx1ZSI6MTAsIlNwZW50IjpmYWxzZSwiU2NyaXB0IjoiQkdmNTFGTHhnWkl0WVNVcmpOZEJaK2ZDWDRiTnBuSWlrQlc5QSt2UGZxQlZmNXV0TEhOUTFiRlV2UUtQeXdrWkVFR09GVXZ2c3pYQ1hOUFkxM0tsbXQ4PSIsIkFkZHJlc3MiOiJXRDlHUzFBZ3pJdVdmazNDK2Fwd2JtbmFuZ3c9In0seyJWYWx1ZSI6MTAsIlNwZW50IjpmYWxzZSwiU2NyaXB0IjoiQksxS3A2WCtMUENHcGFqK1VKWDBtTXQrVGRvNjVNTEZaVi9qLytBUTZOc092RHcyZ1RxUTNKS0VBa3VFak5kV0MwdUdTMW4rS3Zic1o4MVNEd0pRaFh3PSIsIkFkZHJlc3MiOiJXRDlHUzFBZ3pJdVdmazNDK2Fwd2JtbmFuZ3c9In0seyJWYWx1ZSI6MTAsIlNwZW50IjpmYWxzZSwiU2NyaXB0IjoiQk1zUzVreitGY3l4elMzc0J6TnhrSUtRRXVsMUk1SmRieXF3am9zSWlDOWwxR3lWRFlJd09Ud2kwbTRPN2U0UHh2MC9leXFLRkc2VVNNMUZYaXhhZmRrPSIsIkFkZHJlc3MiOiJXRDlHUzFBZ3pJdVdmazNDK2Fwd2JtbmFuZ3c9In0seyJWYWx1ZSI6MTAsIlNwZW50IjpmYWxzZSwiU2NyaXB0IjoiQk1SQ2x4VG9HZWhsZHdlWEtXNkZHbDJVdmdNVEVuZ0tKbE0zc3U3elR5ZWtWSzM2UFZlUzNVeDVZSTJ0TkFQdlNpQm03UlcyRW9aZWVINENWbzdYaGFvPSIsIkFkZHJlc3MiOiJXRDlHUzFBZ3pJdVdmazNDK2Fwd2JtbmFuZ3c9In0seyJWYWx1ZSI6MTAsIlNwZW50IjpmYWxzZSwiU2NyaXB0IjoiQkVFM2ZQRkZHQVM1NjBucSs1bDZOVWpZdjdjeTNtM01RL3drbnpwV3pxVEVBZ0hQbHB0YVhkRmpxWERKYkdQYmd6MWJ3RzdDdmdrenZoWWRKOFVGSThJPSIsIkFkZHJlc3MiOiJXRDlHUzFBZ3pJdVdmazNDK2Fwd2JtbmFuZ3c9In0seyJWYWx1ZSI6MTAsIlNwZW50IjpmYWxzZSwiU2NyaXB0IjoiQk9jcDFCQTFCejNGaWNhYjVlb0lUeURGWG5nY2R1d0drRmVOOExwUjVBVzkzYURweXFpZGVJbVNpR3ZZZmV3dGFDZXpReUs5c0lwNE1TdW03blJqVUFNPSIsIkFkZHJlc3MiOiJXRDlHUzFBZ3pJdVdmazNDK2Fwd2JtbmFuZ3c9In0seyJWYWx1ZSI6MTAsIlNwZW50IjpmYWxzZSwiU2NyaXB0IjoiQk1LRkwyUE8zWUV2bGFHRmRpZzJ2MncrMXBnb2d4TkxqWm9rSURGY3ZPRDk4bG1tUDdyMVVXejdEc3RBcW9qdE52dzFzUnorUUcxcnZhMkdJYVFlVWpzPSIsIkFkZHJlc3MiOiJXRDlHUzFBZ3pJdVdmazNDK2Fwd2JtbmFuZ3c9In0seyJWYWx1ZSI6MTAsIlNwZW50IjpmYWxzZSwiU2NyaXB0IjoiQkdzZnVwcjFKRllFRVFFbzBZWUh5U1BpL20zWHFrNCtaU3lJSnFETG1mdG9kVVM4ZFpOMnp1Q1N0cEdWcXZqLzFmS1lERkVHNHFTdU9GVHlVMUk3Z2h3PSIsIkFkZHJlc3MiOiJXRDlHUzFBZ3pJdVdmazNDK2Fwd2JtbmFuZ3c9In1d","error":null}';
UserUtxoTable userUtxoTable = UserUtxoTable();

user_utxo_setUtxoReturns_test(){
  var jsonData = jsonDecode(getTableAccount);
  var utxoReturns = jsonDecode(utf8.decode(base64Decode(jsonData["result"])));
  userUtxoTable.setUtxoReturns(utxoReturns);
  test("UserUtxoTable SetUtxoReturns", (){
    expect(userUtxoTable.utxoReturns.length, utxoReturns.length);
  });
}

user_utxo_setUtxoOutputs_test(){
  var jsonData = jsonDecode(findForAccount);
  var utxoOutputs = jsonDecode(utf8.decode(base64Decode(jsonData["result"])));
  userUtxoTable.setUtxoOutputs(utxoOutputs);
  test("UserUtxoTable SetUtxoOutputs", (){
    expect(userUtxoTable.utxoReturns.length, utxoOutputs.length);
  });
}

user_utxo_getBalance_test(){
  int balance = userUtxoTable.getBalance();
  test("UserUtxoTable GetBalance", (){
    expect(balance, 135);
  });
}

main() {
  user_utxo_setUtxoReturns_test();
  user_utxo_setUtxoOutputs_test();
  user_utxo_getBalance_test();
}